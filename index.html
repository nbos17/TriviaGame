<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Trivia Game</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <style>
    .Question {
      background-color: blue;
    }
    .Answer {
      background-color: red;
    }
    .answer {
      margin-left: 30px;
    }

  </style>
</head>

<body>

  <div class="container">
    <div class="row">
      <div class="col-md-12"><h1>Trivia Game</h1></div>
    </div>
    <div class="row">
      <div class="col-md-12 Question">Q1</div>
    </div>
    <div class="row Answer">
    </div>
    <div class='row' id = 'timer'>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">


    var correct = 0;
    var incorrect = 0;
    var numOfQuestions = 0;
    var timeouts = 0;
    var selectedAnswer = false;

    var questions = [
     {  
        //number : 1,
        name : "Who was our second President?",
        guess : ["George Washington", "Thomas Jefferson", "John Adams", "Ben Franklin"],
        CorrectAnswer : 2,
        attempted : false,
        message : "John Adams"
      },
      {
        //number : 2,
        name : "Who was head of Slytherin house?",
        guess : ["Dumbledore", "Snape", "Flitwick", "Voldemort"],
        CorrectAnswer : 1,
        attempted : false,
        message : "Snape"
      },
      {
        name : "Who was the QB of the 2017 Super Bowl winning team?",
        guess : ["Tom Brady", "Matt Ryan", "Russell Wilson", "Ben Roethlisberger"],
        CorrectAnswer : 0,
        attempted : false,
        message : "Tom Brady"
      }
    ];

  function pause() {
    setTimeout(timer, 1000 * 5);
    function timer() {
      console.log("time");
      selectQuestion(questions);
    }
  }

  function selectQuestion(object) {
    //selectedAnswer = false;
    $('.Question').show();
    $('.Question').text(object[numOfQuestions].name);
    $('.display').remove();
    timer();
    if (numOfQuestions < object.length ) {
      for (i = 0; i < object[numOfQuestions].guess.length; i++) {
        var abc = $('<newDiv>');
        abc.addClass('answer');
        abc.val(i);
        abc.text(object[numOfQuestions].guess[i]);
        $('.Answer').append(abc);
      }

      $('.answer').on("click", function() {
      var userGuess = $(this).val();
      userGuess = parseInt(userGuess);
      console.log(userGuess);

      if (userGuess === object[numOfQuestions].CorrectAnswer) {
        //alert('Correct!');
        selectedAnswer = true;
        correct++;
        object[numOfQuestions].attempted = true;
        numOfQuestions++;
        if (numOfQuestions >= 3) {
          alert('end game');
        }
        generateImage(questions);
        //selectQuestion(questions);
      }
      else {
        alert('Incorrect!');
        selectedAnswer = true;
        incorrect++;
        object[numOfQuestions].attempted = true;
        numOfQuestions++;
        generateImage(questions);
      }

    });
    }
    else {
      alert("end game");
    }

  }


selectQuestion(questions);

function generateImage (object) {
  $('.answer').remove();
  $('.Question').hide();
  var winning = $('<newDiv>');
  winning.addClass('display');
  winning.text("The Correct Answer is " + object[numOfQuestions - 1].message);
  $('.Answer').append(winning);
  pause();

  //selectQuestion(questions);
}

function timer() {
  var t = 10;
  var countdowns = setInterval(countdown, 1000);
    function countdown() {
      if (t === 0) {
        timeouts++;
        clearInterval(countdowns);
        numOfQuestions++;
        generateImage(questions);
      }
      else {
        t--;
        $('#timer').text(t);
        }
      if (selectedAnswer == true ) {
          clearInterval(countdowns);
      }
    }     
}


  </script>
</body>

</html>